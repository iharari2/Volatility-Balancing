# =============================================================================
# Volatility-Balancing Environment Variables
# =============================================================================
# Copy this file to .env and adjust values for your environment.
# The backend loads .env via python-dotenv automatically.
# =============================================================================

# ---------------------------------------------------------------------------
# Persistence Layer
# ---------------------------------------------------------------------------
# Backend for positions, orders, trades. Options: "sql" | "memory"
APP_PERSISTENCE=sql

# Backend for events. Options: "sql" | "memory"
APP_EVENTS=sql

# Backend for idempotency store. Options: "redis" | "memory"
APP_IDEMPOTENCY=memory

# Auto-create database tables on startup. Set to "true" for first deploy.
APP_AUTO_CREATE=true

# ---------------------------------------------------------------------------
# Database
# ---------------------------------------------------------------------------
# SQLAlchemy connection URL.
# PostgreSQL (production): postgresql://user:password@localhost:5432/volatility_balancing
# SQLite (development):    sqlite:///./vb.sqlite
SQL_URL=postgresql://postgres:postgres@127.0.0.1:5432/volatility_balancing

# ---------------------------------------------------------------------------
# Redis (optional - used for idempotency when APP_IDEMPOTENCY=redis)
# ---------------------------------------------------------------------------
REDIS_URL=redis://127.0.0.1:6379/0

# ---------------------------------------------------------------------------
# Trading Worker
# ---------------------------------------------------------------------------
# Enable/disable the continuous trading worker. Default: true
TRADING_WORKER_ENABLED=true

# ---------------------------------------------------------------------------
# Broker Integration
# ---------------------------------------------------------------------------
# Broker backend. Options: "stub" | "alpaca"
APP_BROKER=stub

# Stub broker fill mode (only when APP_BROKER=stub). Options: "immediate" | "delayed"
STUB_BROKER_FILL_MODE=immediate

# Alpaca API credentials (required when APP_BROKER=alpaca)
# ALPACA_API_KEY=your_api_key_here
# ALPACA_SECRET_KEY=your_secret_key_here

# Use Alpaca paper trading. Default: true (ALWAYS use true unless you intend live trading)
ALPACA_PAPER=true

# Override Alpaca base URL (optional, auto-determined from ALPACA_PAPER)
# ALPACA_BASE_URL=https://paper-api.alpaca.markets

# ---------------------------------------------------------------------------
# Market Data
# ---------------------------------------------------------------------------
# Force market data errors for testing. Default: false
# MARKET_DATA_FORCE_ERROR=false

# Fall back to mock data if real market data fails. Default: false
# MARKET_DATA_FALLBACK_MOCK=false

# Use deterministic (mock) market data instead of yfinance. For testing only.
# TICK_DETERMINISTIC=true

# ---------------------------------------------------------------------------
# Frontend
# ---------------------------------------------------------------------------
# API base URL for the Vite frontend (used at build time)
VITE_API_BASE_URL=http://127.0.0.1:8000

# ---------------------------------------------------------------------------
# Observability (optional)
# ---------------------------------------------------------------------------
# Enable ASGI timing middleware for request tracing
# VB_TIMING=false

# Disable CORS when using timing middleware (debugging only)
# VB_TIMING_NO_CORS=false

# ---------------------------------------------------------------------------
# Deployment Safety
# ---------------------------------------------------------------------------
# Used by scripts/check_trading_safety.py
# API_BASE=http://127.0.0.1:8000
# API_TOKEN=
